<form [formGroup]="patientForm" (ngSubmit)="onSubmit()" novalidate>
  <mat-card-title>Crear Paciente</mat-card-title>
  <mat-card-content>
    <div class="form-row">
      <!-- Codigo paciente -->
      <mat-form-field appearance="outline" id="patientCode">
        <mat-label>Codigo paciente</mat-label>
        <input
          matInput
          formControlName="patientCode"
          required
          patientCode.disabled
        />
      </mat-form-field>

      <!-- DNI -->
      <mat-form-field appearance="outline">
        <mat-label>DNI/NIE</mat-label>
        <input
          matInput
          formControlName="dni"
          placeholder="00000000A"
          required
        />
        @if(patientForm.get('dni')?.hasError('required')) {
        <mat-error>El DNI/NIE es obligatorio</mat-error>
        } @else if(patientForm.get('dni')?.hasError('pattern')) {
        <mat-error>El DNI tiene que ser válido</mat-error>
        }
      </mat-form-field>

      <!-- Nombre -->
      <mat-form-field appearance="outline">
        <mat-label>Nombre</mat-label>
        <input matInput formControlName="name" required />
        @if(patientForm.get('name')?.hasError('required')) {
        <mat-error>El nombre es obligatorio</mat-error>
        }
      </mat-form-field>

      <!-- Primer Apellido -->
      <mat-form-field appearance="outline">
        <mat-label>Apellido 1</mat-label>
        <input matInput formControlName="surname1" />
        @if(patientForm.get('surname1')?.hasError('required')) {
        <mat-error>El apellido es obligatorio</mat-error>
        }
      </mat-form-field>

      <!-- Teléfono -->
      <mat-form-field appearance="outline">
        <mat-label>Teléfono</mat-label>
        <input
          matInput
          type="tel"
          formControlName="phone"
          placeholder="123456789"
        />
        @if(patientForm.get('phone')?.hasError('required')) {
        <mat-error>El teléfono es obligatorio</mat-error>
        } @else if(patientForm.get('phone')?.invalid) {
        <mat-error>El teléfono debe ser válido</mat-error>
        }
      </mat-form-field>

      <!-- Fecha de Nacimiento -->
      <mat-form-field appearance="outline">
        <mat-label>Fecha de Nacimiento</mat-label>
        <input
          matInput
          type="date"
          [max]="maxDateBirth"
          [min]="minDateBirth"
          formControlName="birthDate"
          required
        />
        @if(patientForm.get('birthDate')?.hasError('required')) {
        <mat-error>La fecha de nacimiento es obligatoria</mat-error>
        }
      </mat-form-field>

      <!-- Nacionalidad -->
      <mat-form-field appearance="outline">
        <mat-label>Nacionalidad</mat-label>
        <mat-select formControlName="country">
          <mat-option *ngFor="let country of countries" [value]="country.name">
            {{ country.name }}
          </mat-option>
        </mat-select>
        @if(patientForm.get('country')?.hasError('required')) {
        <mat-error>Tienes que seleccionar un país de nacionalidad</mat-error>
        }
      </mat-form-field>

      <!-- Sexo -->
      <mat-radio-group formControlName="gender" required>
        <mat-label>Género:</mat-label>
        <mat-radio-button value="man">Masculino</mat-radio-button>
        <mat-radio-button value="woman">Femenino</mat-radio-button>
      </mat-radio-group>
    </div>
  </mat-card-content>

  <mat-card-actions>
    <button
      mat-raised-button
      color="primary"
      type="submit"
      [disabled]="patientForm.invalid"
    >
      Registrar
    </button>
    <button mat-raised-button type="button" (click)="resetForm()">
      Reiniciar
    </button>
  </mat-card-actions>
</form>
